{
   "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
   "config": {
    "style": {
      "cell": {
        "stroke": "transparent"
      }
    }
  },
 
   "title":{
      "text":"Average Percentage of Responses above Standard 7.7 Minutes for Metropolitan Melbourne FRV Districts, Q2 2022",
      "color":"#696969"
   },
   "width":800,
   "height":400,
   "projection":{
      "type":"equirectangular"
   },
         "params": [    {
       "name": "qSelect",
       "value": 1,
       "bind": {
         "input": "select",
         "options": [1,2,3,4],
         "labels":[
           "Q1",
           "Q2",
           "Q3",
           "Q4"
         ],
         "name": "Quarter Selection: "
       }
         }],
 
   "layer":[
      {
         "data":{
            "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/Week10Homework/js/LOCALITY_POLYGON.json",
            "format":{
               "type":"topojson",
               "feature":"LOCALITY_POLYGON"
            }
         },
         "mark":{
            "type":"geoshape",
            "fill":"#faf6f6",
            "stroke":"black",
            "strokeWidth":0.25,
            "opacity":0.5
         }
      },
      {
         "data":{
            "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/D2_resources/data/responseTimes/FRV_combined.csv",
            "format":{
               "type":"csv"
            }
         },
         "transform":[
            {
               "lookup":"dis",
               "from":{
                  "data":{
                     "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/Week10Homework/js/finalSimplified.json",
                     "format": {"type":"topojson", "feature": "FRV_DISTRICT"}
                  },
                  
                  "key":"properties.DISTRICT" 
               },
               "as": "geo"
            },
            {"filter": "datum.q == qSelect"}
         ],
         "mark":{
            "type":"geoshape",
            "opacity":0.65,
            "stroke":"black",
            "strokeWidth":1.25
         },
         "encoding":{
            "shape": {"field": "geo", "type": "geojson"},
            "color":{
               "field":"perMet_a",
               "scale":{
                  "type":"linear",
                  "scheme":"goldred",
                  "domain": [77, 93]
               },
               "legend":{
                  "title":"% Above Standard",
                  "titleColor":"#696969",
                  "orient":"none",
                  "legendX":151,
                  "legendY":360,
                  "direction":"horizontal",
                  "labelColor":"#696969"
               }
            },
            "tooltip":[
               {
                  "field":"dis",
                  "type":"nominal",
                  "title":"FRV District"
               },
               {
                  "field":"perMet_a",
                  "type":"quantitative",
                  "title":"% Responses Above 7.7 Min"
               },
               {
                  "field":"sNumber",
                  "type":"quantitative",
                  "title":"Number of Stations"
               },
               {
                  "field":"totInc_a",
                  "type":"quantitative",
                  "title":"Number of Incidences"
               }
            ]
         }
      }
   ]
 }