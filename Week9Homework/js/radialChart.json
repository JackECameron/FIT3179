{
  "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
  "config": {
   "style": {
     "cell": {
       "stroke": "transparent"
     }
   }
 },

  "title":{
     "text":"Average Percentage of Responses above Standard 7.7 Minutes for Metropolitan Melbourne FRV Districts, Q2 2022",
     "color":"#696969"
  },
  "width":800,
  "height":400,
  "projection":{
     "type":"equirectangular"
  },
  "layer":[
     {
        "data":{
           "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/Week9Homework/js/LOCALITY_POLYGON.json",
           "format":{
              "type":"topojson",
              "feature":"LOCALITY_POLYGON"
           }
        },
        "mark":{
           "type":"geoshape",
           "fill":"#faf6f6",
           "stroke":"black",
           "strokeWidth":0.25,
           "opacity":0.5
        }
     },
     {
        "data":{
           "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/Week9Homework/js/finalSimplified.json",
           "format":{
              "type":"topojson",
              "feature":"FRV_DISTRICT"
           }
        },
        "transform":[
           {
              "lookup":"properties.DISTRICT",
              "from":{
                 "data":{
                    "url":"https://raw.githubusercontent.com/JackECameron/FIT3179/main/Week9Homework/data/avgFRV.csv"
                 },
                 "key":"District",
                 "fields":[
                    "avgPercentage",
                    "District",
                    "NumberIncidents",
                    "NumberStations"
                 ]
              }
           },
           {
              "calculate":"datum.avgPercentage",
              "as":"p1"
           }
        ],
        "mark":{
           "type":"geoshape",
           "opacity":0.65,
           "stroke":"black",
           "strokeWidth":1.25
        },
        "encoding":{
           "color":{
              "field":"p1",
              "scale":{
                 "type":"linear",
                 "scheme":"goldred"
              },
              "legend":{
                 "title":"% Above Standard",
                 "titleColor":"#696969",
                 "orient":"none",
                 "legendX":151,
                 "legendY":360,
                 "direction":"horizontal",
                 "labelColor":"#696969"
              }
           },
           "tooltip":[
              {
                 "field":"properties.DISTRICT",
                 "type":"nominal",
                 "title":"FRV District"
              },
              {
                 "field":"p1",
                 "type":"quantitative",
                 "title":"% Responses Above 7.7 Min"
              },
              {
                 "field":"NumberStations",
                 "type":"quantitative",
                 "title":"Number of Stations"
              },
              {
                 "field":"NumberIncidents",
                 "type":"quantitative",
                 "title":"Number of Incidences"
              }
           ]
        }
     }
  ]
}